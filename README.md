# WORDWAVE (êµ¬í˜„ì¤‘)

# **ğŸ“…**ê¸°ê°„

**ê¸°íš ë° ê°œì¸ í•™ìŠµ :** 23. 11. 15 ~ 23. 12. 31 

**êµ¬í˜„ ë‹¨ê³„ :** 24.1.1 ~ 

# **ğŸ¯ ê¸°íš ë°°ê²½**

## **ğŸ–Š**ì˜ì–´ ê³µë¶€ì™€ í”„ë¡œê·¸ë˜ë° ê³µë¶€ë¥¼ ë™ì‹œì— í•˜ê³ ì‹¶ì–´ì„œ

ì˜ì–´ëŠ” â€˜ì„¸ê³„ì˜ ê³µí†µì–´â€™ ë¼ê³  í•  ì •ë„ë¡œ, ë§ì´ ì“°ì…ë‹ˆë‹¤.

ì—¬í–‰ì„ ê°€ì„œ ëŒ€í™”ë¥¼ í†µí•´ ì™¸êµ­ì¸ ì¹œêµ¬ë¥¼ ì‚¬ê·ˆ ìˆ˜ ìˆê³ ,

í•´ì™¸ ê°œë°œìì™€ ì˜ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ì†Œí†µí•  ìˆ˜ ìˆê³ ,

ë˜ëŠ” ì±„ìš© ì‹œì¥ì—ì„œ ê³µì¸ ì˜ì–´ ì‹¤ë ¥ì„ ì¦ëª…í•´ì„œ ë‚˜ë§Œì˜ ê²½ìŸë ¥ì„ ì¦ëª…í•  ìˆ˜ ìˆì£ .

## **ğŸƒ**í˜‘ì—…ì˜ ê²½í—˜ ìŒ“ê¸°

ì €í¬ íŒ€ì€ ìš°í…Œì½” 6ê¸° í”„ë¦¬ì½”ìŠ¤ì—ì„œ ë§Œë‚¬ìŠµë‹ˆë‹¤.

ê·¸ê³³ì—ì„œ ì¸ì—°ì´ ë˜ì–´ íŒ€ì„ ê²°ì„±í•˜ê³ , í”„ë¦¬ì½”ìŠ¤ì—ì„œ ë°°ìš´ ì»¨ë²¤ì…˜ë“¤ì„ ì ìš©í•´ì„œ
ê¹”ë”í•œ íŒ€í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.
ìš°í…Œì½” í”„ë¦¬ì½”ìŠ¤ì—ì„œëŠ” CBD, TDD, Git ì»¨ë²¤ì…˜, ë„ë©”ì¸ ë¡œì§ ë“± í˜‘ì—…ì— ì¤‘ìš”í•œ ì „ëµë“¤ì„ ë°°ì› ìŠµë‹ˆë‹¤. ë°°ìš´ ê²ƒë“¤ì„ í™œìš©í•´ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ë©° â€˜í˜‘ì—…ì— ê°•í•œ ê°œë°œìâ€™ê°€ ë˜ê³ ì ì‹œì‘í–ˆìŠµë‹ˆë‹¤.

# **â­ï¸ ì£¼ìš” ê¸°ëŠ¥**

## ì˜ì–´ ë‹¨ì–´ í€´ì¦ˆ

- ë‹¨ì–´ ë¬¸ì œ ìœ í˜•ì€ 2ê°€ì§€ê°€ ìˆë‹¤.
    - ëœë¤ : ë¬¸ì œëŠ” í’€ë–„ë§ˆë‹¤ ëœë¤ìœ¼ë¡œ ìœ í˜•ì´ ë°”ë€ë‹¤.
    - ìœ í˜• 1: ëœ»ì„ ì œì‹œí•˜ê³ , ê°ê´€ì‹ìœ¼ë¡œ ë§ì¶˜ë‹¤.
    - ìœ í˜• 2: ì¼ë¶€ë¶„ì´ ê°€ë ¤ì§„ ì˜ë‹¨ì–´ë¥¼ ì œì‹œí•˜ê³ , ì£¼ê´€ì‹ìœ¼ë¡œ í•´ë‹¹ ì˜ë‹¨ì–´ë¥¼ ë§ì¶˜ë‹¤.
- ì œí•œì‹œê°„ 20ì´ˆ ë‚´ì— ëª» í’€ë©´ ì˜¤ë‹µì²˜ë¦¬í•œë‹¤.
- í€´ì¦ˆë¥¼ ë‹¤í’€ë©´ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ê·¸ë˜í”„ë¡œ í‘œì‹œí•œë‹¤.

## ë¬¸ë²• í€´ì¦ˆ

- ë¬¸ë²• ë¬¸ì œ ìœ í˜•ì€ 2ê°€ì§€ê°€ ìˆë‹¤.
    - ëœë¤ : ë¬¸ì œëŠ” í’€ë–„ë§ˆë‹¤ ëœë¤ìœ¼ë¡œ ìœ í˜•ì´ ë°”ë€ë‹¤.
    - ìœ í˜• 1: ë¹ˆì¹¸ì´ í¬í•¨ëœ ë¬¸ì¥ì´ ì œì‹œë˜ê³ , ë¬¸ë²•ì— ë§ëŠ” ë‹¨ì–´ë¥¼ ê°ê´€ì‹ìœ¼ë¡œ ì„ íƒí•´ì„œ ë§ì¶˜ë‹¤.
    - ìœ í˜• 2:  ëœ»ì´ ì œì‹œë˜ê³ , ë¬¸ë²• ë¸”ë¡ì„ í´ë¦­ ë° ì¡°í•©ì„ í•´ì„œ ë¬¸ë²• ë¬¸ì œë¥¼ ë§ì¶˜ë‹¤.

## ì‹¤ì‹œê°„ ì˜ì–´ ë‹¨ì–´ ë°°í‹€

1. í•œ ì±„íŒ…ë°©ì— 2ëª…ì˜ ì‚¬ìš©ìê°€ ì ‘ì†í•œë‹¤.
2. ì„œë²„ê°€ ì´ë¯¸ì§€ë¥¼ ì œì‹œí•˜ê³ , 2ëª…ì˜ ì‚¬ìš©ìê°€ í•´ë‹¹ë‹¨ì–´ê°€ ë¬´ì—‡ì¸ì§€ ì±„íŒ…ìœ¼ë¡œ ì •ë‹µì„ ë§ì¶˜ë‹¤.
3. ì˜ë‹¨ì–´ë¥¼ ë¨¼ì € ë§ì¶˜ ì‚¬ìš©ìì˜ ì ìˆ˜ê°€ ì˜¬ë¼ê°€ëŠ” ë°©ì‹.

# **ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ**

# í”„ë¡ íŠ¸

![Untitled][https://camo.githubusercontent.com/5e7e215d9ff3a7c2e96d09232c11b2205565c841d1129dd2185ebd967284121f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f68746d6c352d2532334533344632362e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d68746d6c35266c6f676f436f6c6f723d7768697465](https://camo.githubusercontent.com/5e7e215d9ff3a7c2e96d09232c11b2205565c841d1129dd2185ebd967284121f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f68746d6c352d2532334533344632362e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d68746d6c35266c6f676f436f6c6f723d7768697465)

![Untitled][https://camo.githubusercontent.com/6531a4161596e3d9fdab3d0499a7b7ce5c5c8b568be219f3e9707af042e575d2/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f637373332d2532333135373242362e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d63737333266c6f676f436f6c6f723d7768697465](https://camo.githubusercontent.com/6531a4161596e3d9fdab3d0499a7b7ce5c5c8b568be219f3e9707af042e575d2/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f637373332d2532333135373242362e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d63737333266c6f676f436f6c6f723d7768697465)

![Untitled][https://camo.githubusercontent.com/53ec2e58e03ba275d9b3a386abd96a243cf744a1a7121bdf8262fc8ae6ebc335/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6a6176617363726970742d2532333332333333302e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d6a617661736372697074266c6f676f436f6c6f723d253233463744463145](https://camo.githubusercontent.com/53ec2e58e03ba275d9b3a386abd96a243cf744a1a7121bdf8262fc8ae6ebc335/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6a6176617363726970742d2532333332333333302e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d6a617661736372697074266c6f676f436f6c6f723d253233463744463145)

![Untitled][https://camo.githubusercontent.com/3babc94d778f96441b3a66615fb5ee88c6ed04f174ed49b04df92b071a7d0e80/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f72656163742d2532333230323332612e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d7265616374266c6f676f436f6c6f723d253233363144414642](https://camo.githubusercontent.com/3babc94d778f96441b3a66615fb5ee88c6ed04f174ed49b04df92b071a7d0e80/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f72656163742d2532333230323332612e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d7265616374266c6f676f436f6c6f723d253233363144414642)

![Untitled][https://camo.githubusercontent.com/4da1605c9c424c73f102b2be0a900d8fc55083441b2eda9964e9307770032fa3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5374796c6564636f6d706f6e656e742d4442373039333f7374796c653d666f722d7468652d6261646765266c6f676f3d7374796c6564636f6d706f6e656e7473266c6f676f436f6c6f723d7768697465](https://camo.githubusercontent.com/4da1605c9c424c73f102b2be0a900d8fc55083441b2eda9964e9307770032fa3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5374796c6564636f6d706f6e656e742d4442373039333f7374796c653d666f722d7468652d6261646765266c6f676f3d7374796c6564636f6d706f6e656e7473266c6f676f436f6c6f723d7768697465)

![Untitled][icons8-redux-an-open-source-javascript-library-for-managing-application-state-96.png](WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/icons8-redux-an-open-source-javascript-library-for-managing-application-state-96.png)

![Untitled][https://camo.githubusercontent.com/eb158764299635e01f05400dde56b7d3e6d1a147612e349dded5c08b8fa042ed/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6178696f732d3541323945343f7374796c653d666f722d7468652d6261646765266c6f676f3d6178696f73266c6f676f436f6c6f723d7768697465](https://camo.githubusercontent.com/eb158764299635e01f05400dde56b7d3e6d1a147612e349dded5c08b8fa042ed/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6178696f732d3541323945343f7374796c653d666f722d7468652d6261646765266c6f676f3d6178696f73266c6f676f436f6c6f723d7768697465)

# ë°±ì—”ë“œ

![Untitled][https://camo.githubusercontent.com/b0648ef7a9b6980ea27c1caaeb06d5c8503dbb4f9b4d9d7ca1df60a5edc14340/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6a6176612d2532334544384230302e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d6f70656e6a646b266c6f676f436f6c6f723d7768697465](https://camo.githubusercontent.com/b0648ef7a9b6980ea27c1caaeb06d5c8503dbb4f9b4d9d7ca1df60a5edc14340/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6a6176612d2532334544384230302e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d6f70656e6a646b266c6f676f436f6c6f723d7768697465)

![Untitled][https://camo.githubusercontent.com/aac74ca85b21ed1ff4fa88dda8712fce9cddbf786bdf807231e6179f70003ac5/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4a57542d626c61636b3f7374796c653d666f722d7468652d6261646765266c6f676f3d4a534f4e253230776562253230746f6b656e73](https://camo.githubusercontent.com/aac74ca85b21ed1ff4fa88dda8712fce9cddbf786bdf807231e6179f70003ac5/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4a57542d626c61636b3f7374796c653d666f722d7468652d6261646765266c6f676f3d4a534f4e253230776562253230746f6b656e73)

![Untitled][https://camo.githubusercontent.com/42dd3f9f9345fb4a3e1a24d0483c62ac853b227b6bec314dbd09aa0d9edc9671/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f737072696e67626f6f742d3644423333463f7374796c653d666f722d7468652d6261646765266c6f676f3d737072696e67626f6f74266c6f676f436f6c6f723d7768697465](https://camo.githubusercontent.com/42dd3f9f9345fb4a3e1a24d0483c62ac853b227b6bec314dbd09aa0d9edc9671/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f737072696e67626f6f742d3644423333463f7374796c653d666f722d7468652d6261646765266c6f676f3d737072696e67626f6f74266c6f676f436f6c6f723d7768697465)

![Untitled][https://camo.githubusercontent.com/73e403d49e115d16cfca0f675bd93fad1aaf60b3b2e2cb6938b7aad13abc9b09/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f737072696e6773656375726974792d3644423333463f7374796c653d666f722d7468652d6261646765266c6f676f3d737072696e677365637572697479266c6f676f436f6c6f723d7768697465](https://camo.githubusercontent.com/73e403d49e115d16cfca0f675bd93fad1aaf60b3b2e2cb6938b7aad13abc9b09/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f737072696e6773656375726974792d3644423333463f7374796c653d666f722d7468652d6261646765266c6f676f3d737072696e677365637572697479266c6f676f436f6c6f723d7768697465)

![Untitled][https://camo.githubusercontent.com/92e843af63a4c5e2f893e9e1d2ed37f768c5a74315c8af46b16fe8661929266b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f616d617a6f6e6563322d4646393930303f7374796c653d666f722d7468652d6261646765266c6f676f3d616d617a6f6e656332266c6f676f436f6c6f723d7768697465](https://camo.githubusercontent.com/92e843af63a4c5e2f893e9e1d2ed37f768c5a74315c8af46b16fe8661929266b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f616d617a6f6e6563322d4646393930303f7374796c653d666f722d7468652d6261646765266c6f676f3d616d617a6f6e656332266c6f676f436f6c6f723d7768697465)

![Untitled][https://camo.githubusercontent.com/d61eb16e74c265915596a84a51d5b50229367ad16915ca42da51f1a021bb3750/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6d7973716c2d3434373941313f7374796c653d666f722d7468652d6261646765266c6f676f3d6d7973716c266c6f676f436f6c6f723d7768697465](https://camo.githubusercontent.com/d61eb16e74c265915596a84a51d5b50229367ad16915ca42da51f1a021bb3750/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6d7973716c2d3434373941313f7374796c653d666f722d7468652d6261646765266c6f676f3d6d7973716c266c6f676f436f6c6f723d7768697465)

# í˜‘ì—…

![Untitled](WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/Untitled.png)

![Untitled](WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/Untitled%201.png)

# **ğŸ“‹**íŠ¸ëŸ¬ë¸”ìŠˆíŒ… í¬ê³ ë¡

## ë°±ì—”ë“œ

---

### ìŠ¤í”„ë§ì‹œíë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ importë¥¼ ì–´ë–¤ê²ƒì„ í•´ì•¼í•˜ëŠ”ê°€?
(servlet, reactive)

```java
import org.springframework.boot.autoconfigure.security.servlet.PathRequest;
import org.springframework.boot.autoconfigure.security.reactive.PathRequest;
```

### ë¬¸ì œ

SpringSecrutiyê°€ ë²„ì „ì—…ì´ ë˜ë©´ì„œ ê¸°ì¡´ì˜ ì½”ë“œë“¤ì´ ë ˆê±°ì‹œì½”ë“œë“¤ì´ ë˜ê±°ë‚˜ deprecatedê°€ ë˜ë²„ë ¸ë‹¤.

ì½”ë“œ ë¦¬íŒ©í† ë§ì¤‘ì— ì–´ë– í•œ importë¬¸ì„ ì¨ì•¼í•˜ëŠ”ì§€ í—·ê°ˆë¦¼ì— ì§ë©´í–ˆë‹¤.

ìš°ë¦¬ëŠ” Spring+React í”„ë¡œì íŠ¸ì´ë‹¤, ì–´ë–¤ê²ƒì„ ì¨ì•¼í• ê¹Œ?

### í•´ê²°

1. **ì„œë¸”ë¦¿ ê¸°ë°˜ì˜ ìŠ¤í”„ë§ MVCì™€ `org.springframework.boot.autoconfigure.security.servlet.PathRequest` ì‚¬ìš©:**
    - ê¸°ì¡´ì— ì„œë¸”ë¦¿ ê¸°ë°˜ì˜ ìŠ¤í”„ë§ MVCë¥¼ ì‚¬ìš©í•˜ê³  ìˆê±°ë‚˜, í–¥í›„ì—ë„ ì„œë¸”ë¦¿ ê¸°ë°˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê³„ì† ì‚¬ìš©í•  ê³„íšì´ ìˆë‹¤ë©´ ì´ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - ì´ ê²½ìš°ì—ëŠ” **`org.springframework.boot.autoconfigure.security.servlet.PathRequest`**ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²½ë¡œ ìš”ì²­ì— ëŒ€í•œ ë³´ì•ˆ êµ¬ì„±ì„ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **WebFluxì™€ `org.springframework.boot.autoconfigure.security.reactive.PathRequest` ì‚¬ìš©:**
    - Reactì™€ í•¨ê»˜ ë¹„ë™ê¸° ë° Reactiveí•œ í”„ë¡œê·¸ë˜ë° ìŠ¤íƒ€ì¼ì„ ì‚¬ìš©í•˜ë ¤ëŠ” ê²½ìš°, í˜¹ì€ í–¥í›„ì—ë„ ë¦¬ì•¡í‹°ë¸Œí•œ ë°©ì‹ìœ¼ë¡œ ê°œë°œí•˜ê³ ì í•˜ëŠ” ê²½ìš°ì—ëŠ” WebFluxì™€ í•´ë‹¹ íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
    - **`org.springframework.boot.autoconfigure.security.reactive.PathRequest`**ëŠ” Reactive ìŠ¤íƒ€ì¼ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©ë©ë‹ˆë‹¤.

> ë”°ë¼ì„œ í”„ë¡œì íŠ¸ì˜ ì„±ê²©ê³¼ í–¥í›„ ê°œë°œ ë°©í–¥ì„ ê³ ë ¤í•˜ì—¬ ë‘ ê°€ì§€ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ë©´ ë©ë‹ˆë‹¤.
ë§Œì•½ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ëŠ” ê²½ìš°ì—ëŠ” Reactì™€ì˜ í†µí•©ì„ ê³ ë ¤í•˜ì—¬ WebFluxì™€ **`org.springframework.boot.autoconfigure.security.reactive.PathRequest`**ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì´ ë”ìš± ì í•©í•  ê²ƒì…ë‹ˆë‹¤.
> 

### ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ê´€ë ¨ ê¸°ëŠ¥ êµ¬í˜„ì¤‘ì— ê¼­ ì•Œì•„ì•¼í• ê²ƒ!

ìŠ¤í”„ë§ ì‹œíë¦¬í‹° configë¥¼ ì‘ì„±í•˜ê¸° ì „ ì•Œê³  ë„˜ì–´ê°€ì•¼í•˜ëŠ” ê²ƒì´ ìˆë‹¤.

Spring Security 5.7 ì´í›„ë¶€í„° @Beanìœ¼ë¡œ SecurityFilterChainì„ êµ¬í˜„í•´ì„œ ì‹œíë¦¬í‹°ë¥¼ ì ìš©ì‹œí‚¤ëŠ” ë°©ë²•ì„ ê¶Œì¥í•˜ê¸° ë•Œë¬¸ì— í•„í„°ì²´ì¸ êµ¬ì„±ì„ extendsë¡œ í•˜ëŠ” ì´ì „ë°©ì‹ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë¹ˆë“±ë¡ ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤.

### **JSON ë³€í™˜ ê³¼ì •ì—ì„œì˜ ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ í•´ê²°
(ì–‘ë±¡í–¥ì°¸ì¡°-ë¬´í•œë£¨í”„ ë¬¸ì œ)**

## **Jackson**

<aside>
ğŸ’¡ JSON (JavaScript Object Notation) ë°ì´í„°ë¥¼ Java ê°ì²´ë¡œ ë³€í™˜í•˜ê±°ë‚˜,
ê·¸ ë°˜ëŒ€ë¡œ Java ê°ì²´ë¥¼ JSON ë°ì´í„°ë¡œ ë³€í™˜í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.
ì´ëŸ° ë³€í™˜ ì‘ì—…ì„ **'ì§ë ¬í™”(Serialization)'**ì™€ '**ì—­ì§ë ¬í™”**(Deserialization)'ë¼ê³  í•©ë‹ˆë‹¤.

</aside>

**ì§ë ¬í™”:**

Java ê°ì²´ë¥¼ JSON í˜•íƒœì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” ì‘ì—…. ì´ëŠ” RESTful APIì—ì„œ ì‘ë‹µ ë°ì´í„°ë¥¼ ìƒì„±í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

**ì—­ì§ë ¬í™”:**

JSON í˜•íƒœì˜ ë¬¸ìì—´ì„ Java ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ì‘ì—…. ì´ëŠ” APIì—ì„œ ìš”ì²­ ë°ì´í„°ë¥¼ ë°›ì•„ ì²˜ë¦¬í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

**ë°ì´í„° ë°”ì¸ë”©:**

JSONì„ Java ê°ì²´ë¡œ ë³€í™˜í•˜ê±°ë‚˜ ê·¸ ë°˜ëŒ€ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ, ì–´ë–¤ JSON í•„ë“œê°€ ì–´ë–¤ Java ê°ì²´ì˜ ì–´ë–¤ í•„ë“œì™€ ì—°ê²°ë˜ëŠ”ì§€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

**ì–´ë…¸í…Œì´ì…˜:**

Jacksonì€ ë‹¤ì–‘í•œ ì–´ë…¸í…Œì´ì…˜ì„ ì œê³µí•˜ì—¬, ì§ë ¬í™”/ì—­ì§ë ¬í™” ê³¼ì •ì—ì„œì˜ ì„¸ë¶€ì ì¸ ë™ì‘ì„ ì œì–´í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, `@JsonIgnore` ì–´ë…¸í…Œì´ì…˜ì€ íŠ¹ì • í•„ë“œë¥¼ ì§ë ¬í™” ê³¼ì •ì—ì„œ ë¬´ì‹œí•˜ë„ë¡ ì§€ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**í”„ë¦¬í‹° í”„ë¦°íŠ¸:**

JSON ë°ì´í„°ë¥¼ ì½ê¸° ì¢‹ì€ í˜•íƒœë¡œ ì¶œë ¥í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

> Jacksonì— ëŒ€í•´ì„œ ê¶ê¸ˆí•˜ë‹¤ë©´ ìœ„ì— ì •ë³´ë¥¼ ë³´ì.
> 

### ë¬¸ì œ

ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ë¥¼ ê°€ì§€ëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤ë“¤ì´ JSONìœ¼ë¡œ ë³€í™˜ë˜ëŠ” ê³¼ì •ì—ì„œ ê°ê°ì´ ì„œë¡œë¥¼ ì°¸ì¡°í•˜ë©´ì„œ ë¬´í•œë£¨í”„ê°€ ë°œìƒí–ˆìŒ

### í•´ê²°

```java
@Entity
@Getter
public class VocaBook {
    // ...
    @OneToMany(mappedBy = "vocaBook")
    @JsonManagedReference // ì¶”ê°€
    private List<Voca> vocas = new ArrayList<>();
    // ...
}

@Entity
@Getter
@NoArgsConstructor
public class Voca {
    // ...
    @ManyToOne
    @JsonBackReference // ì¶”ê°€
    private VocaBook vocaBook;
    // ...
}
```

**`@JsonManagedReference`, `@JsonBackReference`, `@JsonIdentityInfo` ë“±ì˜ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë¥¼ í•´ê²°í–ˆìŒ**

`@JsonManagedReference`ëŠ” ìˆœí™˜ ì°¸ì¡°ì˜ 'ë¶€ëª¨' ìª½ì— ë‘ê³ , `@JsonBackReference`ëŠ” 'ìì‹' ìª½ì— ë‘¡ë‹ˆë‹¤.

ì´ë ‡ê²Œ í•˜ë©´, `VocaBook`ì„ JSONìœ¼ë¡œ ë³€í™˜í•  ë•Œ `Voca` ë¦¬ìŠ¤íŠ¸ê°€ í¬í•¨ë˜ì§€ë§Œ, ê° `Voca`ëŠ” ë‹¤ì‹œ `VocaBook`ì„ ì°¸ì¡°í•˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤. ì´ë¡œì¨ ë¬´í•œë£¨í”„ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ì™¸ì—ë„ `@JsonIdentityInfo` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì–´ë…¸í…Œì´ì…˜ì€ ì—”í‹°í‹°ì˜ IDë¥¼ ì´ìš©í•˜ì—¬ ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.

### LazyInitializationException - JJY

### ì˜¤ë¥˜ ë°œê²¬

ì•„ë˜ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸í•˜ë˜ ì¤‘ LazyInitializationExceptionì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

```java
public GrammarBookResponseDto getUserWrongGrammarBook(String userName, String grammarBookName) {
    Long userId = getUserIdByUserName(userName);
    List<UserGrammarStatus> userGrammarStatuses = this.userGrammarStatusRepository.findByUserId(userId);
    Long grammarBookId = this.grammarBookService.getGrammarBookIdByGrammarBookName(grammarBookName);

    List<GrammarDto> grammarDtos = new ArrayList<>();
    for (UserGrammarStatus userGrammarStatus : userGrammarStatuses) {
        if (userGrammarStatus.getGrammarBookId() != null && userGrammarStatus.getGrammarBookId().equals(grammarBookId)) {
            grammarDtos.add(this.grammarService.getGrammar(userGrammarStatus.getWrongGrammarId()));
        }
    }
    return GrammarBookResponseDto.builder()
            .id(grammarBookId)
            .name(grammarBookName)
            .grammars(grammarDtos)
            .build();
}
```

ì˜¤ë¥˜ ë¡œê·¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```
org.hibernate.LazyInitializationException: could not initialize proxy [com.wordwave.grammarbook.GrammarBook#14] - no Session
	at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:164)
	at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:310)
	at org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor.intercept(ByteBuddyInterceptor.java:44)
	at org.hibernate.proxy.ProxyConfiguration$InterceptorDispatcher.intercept(ProxyConfiguration.java:102)
	at com.wordwave.grammarbook.GrammarBook$HibernateProxy$a5pHvLS3.getName(Unknown Source)
	at com.wordwave.grammar.GrammarService.getGrammar(GrammarService.java:29)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.wordwave.grammar.GrammarService$$SpringCGLIB$$0.getGrammar(<generated>)
	at com.wordwave.grammar.UserGrammarStatusService.getUserWrongGrammarBook(UserGrammarStatusService.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.wordwave.grammar.UserGrammarStatusService$$SpringCGLIB$$0.getUserWrongGrammarBook(<generated>)
	at com.wordwave.grammar.UserGrammarStatusServiceTest.getUserWrongGrammarBookTest(UserGrammarStatusServiceTest.java:46)
	...
```

### ì˜¤ë¥˜ ì›ì¸

`org.hibernate.LazyInitializationException`ì€ ì¤€ì˜ì† ìƒíƒœì˜ í”„ë¡ì‹œë¥¼ ì´ˆê¸°í™”í•˜ë©´ ë°œìƒí•©ë‹ˆë‹¤.

> ì¤€ì˜ì†(detached) ìƒíƒœë€, ì—”í‹°í‹° ê°ì²´ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ìˆë‹¤ê°€ ë¶„ë¦¬ëœ ìƒíƒœì…ë‹ˆë‹¤. ì¤€ì˜ì† ìƒíƒœì˜ ì—”í‹°í‹° ê°ì²´ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
> 

> í”„ë¡ì‹œ ì´ˆê¸°í™”ë€, ì˜ì† ìƒíƒœì˜ í”„ë¡ì‹œ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ ì´ìš©í•˜ë ¤ í• ë•Œ í”„ë¡ì‹œ ê°ì²´ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ìš”ì²­í•´ ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë¶ˆëŸ¬ì™€ ì°¸ì¡°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
> 

forë¬¸ ì•ˆì—ì„œ `getGrammar()`ë¥¼ ì—¬ëŸ¬ ë²ˆ ë°˜ë³µí•˜ëŠ” ë™ì•ˆ, ë™ì¼í•œ GrammarBookê³¼ ì—°ê´€ê´€ê³„ë¥¼ ë§ºê³  ìˆëŠ” ì—¬ëŸ¬ Grammarê°€ ì¡´ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë§Œì•½ `getGrammar()`ê°€ í˜¸ì¶œë˜ì–´ GrammarBookì— ì ‘ê·¼í•˜ì—¬ grammarBookNameì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ GrammarBook í”„ë¡ì‹œ ê°ì²´ë¥¼ ì´ˆê¸°í™”í•˜ê³ , í•„ìš”í•œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë’¤ ë©”ì„œë“œê°€ ì¢…ë£Œë˜ì—ˆë‹¤ê³  í•´ë´…ì‹œë‹¤. ì´ë•Œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œëŠ” í•´ë‹¹ GrammarBook ì—”í‹°í‹° ê°ì²´ì™€ í”„ë¡ì‹œ ê°ì²´ëŠ” ì¤€ì˜ì† ìƒíƒœê°€ ë˜ì§€ë§Œ, í”„ë¡ì‹œ ê°ì²´ëŠ” PKê°’ì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤. 

ê·¸ ë’¤ì— ë˜ `getGrammar()`ê°€ í˜¸ì¶œë˜ê³ , í•´ë‹¹ Grammarê°€ ì´ì „ê³¼ ê°™ì€ GrammarBookì— ì ‘ê·¼í•œë‹¤ë©´ JPAëŠ” ê°™ì€ PKê°’ì„ ê°€ì§„ í”„ë¡ì‹œ ê°ì²´ë¥¼ ë¨¼ì € ì´ìš©í•˜ë ¤ê³  ë“­ë‹ˆë‹¤.

ê·¸ë¦¬ê³  `getName()`ìœ¼ë¡œ grammarBookNameê°’ì„ ê°€ì ¸ì˜¤ë ¤ê³  í•˜ëŠ”ë°, PKê°’ì´ ì•„ë‹Œ ë°ì´í„°ì— ì ‘ê·¼í•˜ë ¤ë©´ í”„ë¡ì‹œë¥¼ ì´ˆê¸°í™”í•´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë¯¸ ì´ í”„ë¡ì‹œ ê°ì²´ëŠ” ì¤€ì˜ì† ìƒíƒœì—¬ì„œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— í”„ë¡ì‹œ ì´ˆê¸°í™” ìš”ì²­ì„ í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ `org.hibernate.LazyInitializationException`ê°€ ë°œìƒí–ˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

### ì˜¤ë¥˜ í•´ê²°

ë¬¸ì œì˜ ë©”ì„œë“œì— `@Transactional`ì„ ë¶™ì´ë©´ ë©”ì„œë“œê°€ ëë‚ ë•Œê¹Œì§€ ë©”ì„œë“œ ì‹¤í–‰ì¤‘ ìƒì„±ë˜ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë‚´ ì—”í‹°í‹° ê°ì²´ë¥¼ ì œê±°í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### **`Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException:`**

### ë¬¸ì œ

```jsx
@GetMapping("{vocaBookId}")
	public ResponseEntity<?> getVocaBookDetail(@PathVariable long vocaBookId){
		try {
			Map<Long,List<String>> categories = vocaBookService.getCategoriesOfVocaBook(vocaBookId);
			return ResponseEntity.ok().body(categories);
		} catch (Exception e) {	
			e.printStackTrace();
			return ResponseEntity.badRequest().body("VocaBook ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨!");
		}
	}
```

```jsx
@Query("select v.category from Voca v where v.vocaBook.id = :vocaBookId")
    List<String> findCategoriesByVocaBookId(@Param("vocaBookId") long vocaBookId);
```

****`@Param` ì• ë„ˆí…Œì´ì…˜ì´ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©ë˜ì§€ ì•Šì•˜ì„ ë•Œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ì˜€ëŠ”ë°,
`@Param` ì• ë„ˆí…Œì´ì…˜ì€ ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ SQL ì¿¼ë¦¬ì˜ íŒŒë¼ë¯¸í„°ë¡œ ë°”ì¸ë”©í•  ë•Œ ì‚¬ìš©í•˜ëŠ”ë°, ì´ë•Œ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ê³¼ `@Param`ì˜ ê°’ì´ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

### í•´ê²°

```java
@GetMapping("{vocaBookId}")
	public ResponseEntity<?> getVocaBookDetail(@PathVariable("vocaBookId") long vocaBookId){
		try {
			Map<Long,List<String>> categories = vocaBookService.getCategoriesOfVocaBook(vocaBookId);
			return ResponseEntity.ok().body(categories);
		} catch (Exception e) {	
			e.printStackTrace();
			return ResponseEntity.badRequest().body("VocaBook ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨!");
		}
	}
```

ìœ„ì˜ ì½”ë“œì—ì„œ `@PathVariable("vocaBookId")`ëŠ” URLì˜ `{vocaBookId}` ë¶€ë¶„ì„ `long vocaBookId` ë§¤ê°œë³€ìˆ˜ì— ë°”ì¸ë”©í•©ë‹ˆë‹¤. ë”°ë¼ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ `/api/vocabook/1`ê³¼ ê°™ì€ URLë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´, `vocaBookId` ë§¤ê°œë³€ìˆ˜ëŠ” `1`ì´ë¼ëŠ” ê°’ì„ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤.

ë”°ë¼ì„œ, `@PathVariable` ì• ë„ˆí…Œì´ì…˜ì— ë§¤ê°œë³€ìˆ˜ì˜ ì´ë¦„ì„ ëª…ì‹œí•¨ìœ¼ë¡œì¨ ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ í´ë¼ì´ì–¸íŠ¸ëŠ” `vocaBookId`ë¥¼ í†µí•´ íŠ¹ì • ë‹¨ì–´ì¥ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## í”„ë¡ íŠ¸

---

### **redux-devtools-extension ì˜ ì˜ì¡´ì„± ì¶©ëŒ ë¬¸ì œ**

**ì°¸ê³ **

[íŒ¨í‚¤ì§€ ì˜ì¡´ì„± ì¶©ëŒ ë²„ì „ ì—ëŸ¬ í•´ê²° ERESOLVE unable to resolve dependency tree](https://disco-biscuit.tistory.com/68)

redux-devtools-extension í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ”
redux íŒ¨í‚¤ì§€ë‘ í˜¸í™˜ë˜ëŠ” ë²„ì „ì´ **`^3.1.0 || ^4.0.0`** ë§Œ ê°€ëŠ¥í•˜ë‹¤

### í•´ê²°ë²•

pakeage.jsonì—ì„œ redux ë²„ì „ì„ ë‹¤ìš´ê·¸ë ˆì´ë“œ í•œë‹¤.

ì—¬ê¸°ì„œ ë‚˜ëŠ” 4.0.0ë¡œ ë‹¤ìš´ê·¸ë ˆì´ë“œ í–ˆë‹¤.

ê·¸ ì´í›„ í„°ë¯¸ë„ì—ì„œ

**`npm install -force`**

í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì…ë ¥ í›„ ì¬ì„¤ì¹˜ í–ˆë‹¤.

`npm install --save redux-devtools-extension`

### ë” ì¢‹ì€ í•´ê²°ë²•

<aside>
ğŸ’¡ **Redux Toolkit  ì„ ì“°ì
í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì–´ì°¨í”¼** redux-devtools-extension ë‚´ì¥ëë‹¤.
**`npm install @reduxjs/toolkit`**

</aside>

### ì „ì—­ ìƒíƒœê´€ë¦¬ê°€ ìƒˆë¡œê³ ì¹¨(Redirect) í•´ì•¼ë§Œ ë°˜ì˜ ë˜ëŠ” ë¬¸ì œ

### ë¬¸ì œ

ë¡œê·¸ì¸ì¤‘(ë¡œê·¸ì¸ìœ ì§€)ë¼ëŠ” ìƒíƒœê°€ ì „ì—­ì ìœ¼ë¡œ ìœ ì§€ëŠ” ëì§€ë§Œ,

ì´ê²ƒì´ ìƒˆë¡œê³ ì¹¨ì„ í•œë²ˆ í•´ì¤˜ì•¼ ë°˜ì˜ì´ë˜ëŠ” ë¶ˆí¸í•¨ì´ ìƒê²¼ë‹¤.

### í•´ê²°

```jsx
import LayoutContainer from "./containers/LayoutContainer";
import GrammarPage from "./pages/GrammarPage";
import { Navigate, Route, Routes } from "react-router-dom";
import NotFoundPage from "./pages/NotFoundPage";
import HomePage from "./pages/HomePage"
import LoginPage from "./pages/LoginPage";
import { useEffect, useState } from "react";
import { useSelector } from "react-redux";

function App() {
  const [loging,setLoging] = useState(sessionStorage.getItem('isLoging') || '');
  const { isLoging } = useSelector(state=>state.auth);

  useEffect(() => {
    if(isLoging) return setLoging(true);
  }, [loging,isLoging]);

  console.log('is Login : '+sessionStorage.getItem('isLoging'));

  return (
    <Routes>
      <Route path="/" element={<LayoutContainer />}>
        <Route index element={<HomePage />} />
        <Route path="*" element={<NotFoundPage />} />
        <Route path="grammar" element={sessionStorage.getItem('isLoging') ? <GrammarPage /> : <Navigate to="/login" />} />
        <Route path="login" element={sessionStorage.getItem('isLoging') === null || sessionStorage.getItem('isLoging') === "false" ? <LoginPage /> : <Navigate to="/" />} />
        {/* <Route path="grammar" element={isLoging ? <GrammarPage /> : <Navigate to="/login" />} />
        <Route path="login" element={!isLoging ? <LoginPage /> : <Navigate to="/" />} /> */}
      </Route>
    </Routes>
  );
}

export default App;
```

sessionì— ìˆëŠ” ë¡œê·¸ì¸ìœ ë¬´ ìƒíƒœ ê°’ì„ App.jsì—ì„œ ìŠ¤í† ì–´ì—ì„œ ê°€ì ¸ì˜¨ ê°’ì—ë”°ë¼
ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¥¼ useEffectë¥¼ í†µí•´ í•´ì£¼ì—ˆë‹¤.

### ì ìš©ëœ ì»¤ìŠ¤í…€ í°íŠ¸ê°€ ì‹œìŠ¤í…œ í°íŠ¸ê°€ ì ì‹œ ë¡œë“œ ë˜ë‹¤ê°€, ë‹¤ì‹œ ë‚˜ì˜¤ëŠ” ë¬¸ì œ

### ë¬¸ì œ

ì ìš©ëœ ì»¤ìŠ¤í…€ í°íŠ¸ê°€ ë°”ë¡œ ì ìš©ë˜ì–´ì•¼ í•˜ëŠ”ë°,

ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ê±°ë‚˜, ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ê°€ ëœë”ë§ ë ë–„, ì ì‹œ ì‹œìŠ¤í…œí°íŠ¸ê°€ ë¡œë“œ ë˜ë‹¤ê°€,

ì»¤ìŠ¤í…€ í°íŠ¸ê°€ ë‚˜ì˜¤ëŠ” ë¶ˆì¾Œí•œ í˜„ìƒì´ ìˆì—ˆë‹¤.

### í•´ê²°

```jsx
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/apple-icon-57x57.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <link rel="preload" href="./resources/GmarketSansTTFLight.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <title>WORDWAVE</title>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
```

`<link rel="preload" href="./resources/GmarketSansTTFLight.ttf" as="font" type="font/ttf" crossorigin="anonymous">`
í•´ë‹¹ ì½”ë“œë¡œ í˜ì´ì§€ê°€ ë¡œë“œ ë˜ìë§ˆì í°íŠ¸ë¥¼ ê°€ì ¸ì˜¤ê²Œ í–ˆê³ ,

```jsx
const GlobalStyle = createGlobalStyle`
@font-face {
    font-family: 'GmarketSansTTFLight';
    src: url(${GmarketSansTTFLight}) format('truetype');
    font-weight: normal;
    font-style: normal;
    font-display: 'optional';
}
```

`font-display: 'optional';` 

ì´ëŸ¬í•œ ì˜µì…˜ì„ ê±¸ì–´ì£¼ì—ˆë‹¤.

<aside>
<img src="WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/FM_24.png" alt="WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/FM_24.png" width="40px" /> `optional`ì€ ë¸Œë¼ìš°ì €ì—ê²Œ ì›¹ í°íŠ¸ ë¡œë“œë¥¼ ì‹œë„í•˜ë˜, ë¡œë“œê°€ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ê²½ìš° ì‹œìŠ¤í…œ í°íŠ¸ë¥¼ ê³„ì† ì‚¬ìš©í•˜ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤. ì´ ë°©ë²•ì€ ì›¹ í°íŠ¸ê°€ ë¡œë“œë˜ê¸° ì „ì— ì‹œìŠ¤í…œ í°íŠ¸ê°€ ë³´ì´ëŠ” ì‹œê°„ì„ ìµœì†Œí™”í•˜ë¯€ë¡œ, ì›¹ í°íŠ¸ ë¡œë”©ìœ¼ë¡œ ì¸í•œ ë ˆì´ì•„ì›ƒ ë³€ê²½ì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

</aside>

### ë¦¬ë•ìŠ¤ì˜ ì „ì—­ ìƒíƒœê´€ë¦¬ ë§¤ì»¤ë‹ˆì¦˜ì´ ìƒˆë¡œê³ ì¹¨ ë˜ë©´ ì´ˆê¸°í™” ë˜ëŠ” ë¬¸ì œ

### ë¬¸ì œ

ë¡œê·¸ì¸ì¤‘, ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ useSelectorì— ê°’ì„ í• ë‹¹í•˜ì—¬ ì „ì—­ì ìœ¼ë¡œ ê´€ë¦¬í• ë ¤ê³  í–ˆì—ˆë‹¤, ì´ë ‡ê²Œ í•˜ë©´ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ë‹¤ì–‘í•œ ë¡œì§ì— í™œìš©í• ë ¤ê³  í–ˆì—ˆë‹¤.

í•˜ì§€ë§Œ ì²˜ìŒ ì‹¤í–‰ í• ë–„ëŠ” ê¸°ëŠ¥ì´ ì˜ ìˆ˜í–‰í•˜ì§€ë§Œ, ìƒˆë¡œê³ ì¹¨(ë¦¬ë‹¤ì´ë ‰íŠ¸) ë§Œ í•˜ë©´

useSelectorì— ë‹´ì€ stateë“¤ì´ ì´ˆê¸°í™”ë˜ëŠ” ë¬¸ì œë¥¼ ê²ªì—ˆë‹¤.

### í•´ê²°

[Persist state with Redux Persist using Redux Toolkit in React - LogRocket Blog](https://blog.logrocket.com/persist-state-redux-persist-redux-toolkit-react/)

react-persist ë¼ëŠ” ì˜ì†ì„±ì„ ì§€ì›í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•œ í›„, í•´ê²°í–ˆë‹¤.

```
import React from "react";
import ReactDOM from "react-dom/client";
// import "./index.css";
import App from "./App";
import reportWebVitals from "./reportWebVitals";
import { BrowserRouter } from "react-router-dom";
import { createGlobalStyle } from "styled-components";
import GmarketSansTTFLight from "./resources/GmarketSansTTFLight.ttf";
import WaveEffect from "./components/WaveEffect";
import { configureStore } from "@reduxjs/toolkit";
import rootReducer from "./modules";
import logger from "redux-logger";
import { Provider } from "react-redux";
import 'bootstrap/dist/css/bootstrap.min.css';
import storage from 'redux-persist/lib/storage';
import persistReducer from "redux-persist/es/persistReducer";
import { PersistGate } from "redux-persist/integration/react";
import persistStore from "redux-persist/es/persistStore";

const root = ReactDOM.createRoot(document.getElementById("root"));
const GlobalStyle = createGlobalStyle`
@font-face {
    font-family: 'GmarketSansTTFLight';
    src: url(${GmarketSansTTFLight}) format('truetype');
    font-weight: normal;
    font-style: normal;
    font-display: 'opional';
}

#root {
    font-family: 'GmarketSansTTFLight', sans-serif;
    background: linear-gradient(to right, #89CFF0 0%, #B2FFFF 50%, #89CFF0 100%);
    justify-content: center;
    align-items: center;
    overflow-x: hidden;
    overflow-y: auto;
    position: relative;
}
`;

const persistConfig = {
  key: 'root',
  storage,
};
const persistedReducer = persistReducer(persistConfig, rootReducer);

const store = configureStore({
  reducer: persistedReducer,
  middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(logger)
});

const persistor = persistStore(store);

root.render(
  <BrowserRouter>
    <GlobalStyle />
    <WaveEffect />
    <Provider store={store}>
      <PersistGate loading={null} persistor={persistor}>
        <App />
      </PersistGate>
    </Provider>
  </BrowserRouter>
);

// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
reportWebVitals();
```

<aside>
<img src="WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/FM_24.png" alt="WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/FM_24.png" width="40px" /> `redux-persist` ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Redux ìƒíƒœë¥¼ ë¸Œë¼ìš°ì €ì˜ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë˜ëŠ” ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì— ì˜ì†ì ìœ¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.

</aside>

### `persistConfig`

ì´ëŠ” `redux-persist`ì˜ ì„¤ì • ê°ì²´ì…ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ 'root'ë¼ëŠ” í‚¤ì™€ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤. í‚¤ëŠ” ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë  ë•Œ ì‚¬ìš©ë˜ëŠ” í‚¤ë¥¼ ë‚˜íƒ€ë‚´ë©°, 

`storage`ëŠ” ì‚¬ìš©í•  ìŠ¤í† ë¦¬ì§€ ìœ í˜•ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

### `persistedReducer`

`persistReducer` í•¨ìˆ˜ëŠ” `persistConfig`ì™€ ì›ë˜ì˜ ë¦¬ë“€ì„œ (`rootReducer`)ë¥¼ ì¸ìë¡œ ë°›ì•„ì„œ ìƒˆë¡œìš´ ë¦¬ë“€ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ë¦¬ë“€ì„œëŠ” ì›ë˜ì˜ ë¦¬ë“€ì„œì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ì§€ë§Œ, ì¶”ê°€ì ìœ¼ë¡œ ì•¡ì…˜ì´ ë””ìŠ¤íŒ¨ì¹˜ë˜ë©´ í˜„ì¬ ìƒíƒœë¥¼ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ê³ , ì•±ì´ ì‹œì‘ë  ë•Œ ìŠ¤í† ë¦¬ì§€ì—ì„œ ìƒíƒœë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê¸°ëŠ¥ì„ ê°€ì§‘ë‹ˆë‹¤.

### `store`

ì´ëŠ” `configureStore` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤í† ì–´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œëŠ” `persistedReducer`ë¥¼ ë¦¬ë“€ì„œë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ìŠ¤í† ì–´ì˜ ìƒíƒœê°€ ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜í•  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë©ë‹ˆë‹¤.

### `persistore`

`persistStore` í•¨ìˆ˜ëŠ” ìŠ¤í† ì–´ë¥¼ ì¸ìë¡œ ë°›ì•„ì„œ persistor ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ê°ì²´ëŠ” `PersistGate` ì»´í¬ë„ŒíŠ¸ì— í•„ìš”í•©ë‹ˆë‹¤.

### `PersistGate`

ì´ ì»´í¬ë„ŒíŠ¸ëŠ” ì•±ì´ ì‹œì‘ë  ë•Œ ìŠ¤í† ë¦¬ì§€ì—ì„œ ìƒíƒœë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë™ì•ˆ **ë¡œë”© í™”ë©´**ì„ í‘œì‹œí•˜ë„ë¡ í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ìƒíƒœë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.  `PersistGate` 

ì»´í¬ë„ŒíŠ¸ì˜ `loading` propì—ëŠ” ìƒíƒœë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë™ì•ˆ í‘œì‹œí•  ì»´í¬ë„ŒíŠ¸ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### redux-persist ë¹„ì§ë ¬í™” ì•¡ì…˜ ê°’ ì˜¤ë¥˜ - JJY

### ì˜¤ë¥˜ ë°œê²¬

ë¦¬ì•¡íŠ¸ ì•± ì‹¤í–‰ì‹œ ì½˜ì†”ì°½ì— ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ ë¡œê·¸ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

```java
A non-serializable value was detected in an action, in the path: `register`. Value: Æ’ register(key) {
    _pStore.dispatch({
      type: _constants__WEBPACK_IMPORTED_MODULE_2__["REGISTER"],
      key: key
    });
  }
```

### ì˜¤ë¥˜ ì›ì¸

ë¡œê·¸ë§Œ ë³´ë©´reduxëŠ” state, actionì— ì§ë ¬í™”ê°€ ë¶ˆê°€ëŠ¥í•œ ê°’ì„ ì „ë‹¬í•  ìˆ˜ ì—†ì–´ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì…ë‹ˆë‹¤.
í•˜ì§€ë§Œ ê¸°ëŠ¥ì€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.
ë” ì°¾ì•„ë³¸ ê²°ê³¼, redux-persistì˜ ê³ ìœ  ë¬¸ì œì¸ê²ƒ ê°™ìŠµë‹ˆë‹¤. 

[non-serializable value error Â· Issue #988 Â· rt2zz/redux-persist](https://github.com/rt2zz/redux-persist/issues/988)

persistì˜ ëª‡ê°€ì§€ ì•¡ì…˜ë“¤ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì˜€ìŠµë‹ˆë‹¤. redux toolkit ê³µì‹ ë¬¸ì„œì—ì„œë„ ì´ì— ëŒ€í•œ ì„¤ì •ì„ ì¶”ê°€í•´ ë†“ì•˜ìŠµë‹ˆë‹¤.

[Usage Guide | Redux Toolkit](https://redux-toolkit.js.org/usage/usage-guide#use-with-redux-persist)

### ì˜¤ë¥˜ í•´ê²°

persistì˜ ëª‡ëª‡ ì•¡ì…˜ë“¤ì— ëŒ€í•´ì„œ ì§ë ¬í™” ì²´í¬ë¥¼ ë¬´ì‹œí•˜ë„ë¡ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.

configureStoreë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•©ë‹ˆë‹¤.

```jsx
import {
  FLUSH,
  REHYDRATE,
  PAUSE,
  PERSIST,
  PURGE,
  REGISTER,
} from "redux-persist";

...

const store = configureStore({
  reducer: persistedReducer,
  devTools: process.env.NODE_ENV !== "production",
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: {
        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],
      },
    }).concat(sagaMiddleware, logger),
});
```

### axios ìš”ì²­ ì£¼ì†Œ 403 ì—ëŸ¬ ë¬¸ì œ - JJY

### ì˜¤ë¥˜ ë°œê²¬

idê°’ìœ¼ë¡œ grammarbookì„ ê°€ì ¸ì˜¤ëŠ” axios GET ìš”ì²­ì—ì„œ 403 ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

```jsx
export const getGrammarBookById = async (id) => {
  const response = await axios.get(`api/grammarbook/${id}`);
  return response.data;
};
```

http://localhost:3000/grammarbooks/api/grammarbook/{id}ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³  ìˆì—ˆê³ , ë°±ì—”ë“œì—ì„œ ì—´ì–´ë‘” ìš”ì²­ ì£¼ì†ŒëŠ” http://localhost:3000/api/grammarbook/{id}ì—¬ì„œ AxiosErrorÂ {message: 'Request failed with status code 403', name: 'AxiosError', code: 'ERR_BAD_REQUEST', config: {â€¦}, request: XMLHttpRequest,Â â€¦}ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

### ì˜¤ë¥˜ ì›ì¸

ì•„ì£¼ ë‹¨ìˆœí•œ ì˜¤ë¥˜ì…ë‹ˆë‹¤. axiosì˜ ìš”ì²­ ì£¼ì†Œì— ìƒëŒ€ê²½ë¡œë¥¼ ì§€ì •í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. 

+ 403 ì˜¤ë¥˜ ì›ì¸ì€ ë§¤ìš° ë‹¤ì–‘í•©ë‹ˆë‹¤. ì´ ê²½ìš°ëŠ” ì˜ëª»ëœ ê²½ë¡œë¡œ ìš”ì²­ì„ ë³´ëƒˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

**ìš”ì²­ ì£¼ì†Œê°€ `/`ë¡œ ì‹œì‘í•˜ì§€ ì•Šìœ¼ë©´ axiosëŠ” í˜„ì¬ í˜ì´ì§€ì— ìš”ì²­ ì£¼ì†Œë¥¼ ë¶™ì—¬ì„œ ìš”ì²­ì„ ë‚ ë¦½ë‹ˆë‹¤.**

### ì˜¤ë¥˜ í•´ê²°

ìš”ì²­ ì£¼ì†Œì— `/`ë§Œ ë¶™ì—¬ì£¼ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.

```jsx
export const getGrammarBookById = async (id) => {
  const response = await axios.get(`/api/grammarbook/${id}`);
  return response.data;
};
```

### í´ë¼ì´ì–¸íŠ¸ê°€ DBì— ì—†ëŠ” ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ” ë¬¸ì œ - JJY

### ì˜¤ë¥˜ ë°œê²¬

URL íŒŒë¼ë¯¸í„°ì—ì„œ íŒŒì‹±í•œ grammarbookì˜ idë¡œ í•´ë‹¹ idë¥¼ ê°€ì§„ grammarbookì„ ìš”ì²­í•˜ëŠ” APIê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

```jsx
export const getGrammarBookById = async (id) => {
  const response = await axios.get(`/api/grammarbook/${id}`);
  return response.data;
};
```

ë°±ì—”ë“œì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë‹¤ê°€ ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜ grammarbookì„ ì§€ìš°ê³  ìƒˆë¡œ ìƒì„±í–ˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ ë¦¬ì•¡íŠ¸ê°€ ë‹¹ì—°íˆ ìƒˆë¡œ ìƒì„±ëœ grammarbookì˜ idë¡œ ìš”ì²­í• ê±°ë¼ ìƒê°í–ˆì§€ë§Œ, ì´ë¯¸ ì‚­ì œëœ grammarbookì˜ idë¡œ ìš”ì²­í•´ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.

### ì˜¤ë¥˜ ì›ì¸

redux-persistê°€ ìƒíƒœê°’ì„ ë¸Œë¼ìš°ì € ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ë„ë¡ ì„¤ì •í–ˆê¸° ë•Œë¬¸ì´ë¼ê³  ì¶”ì •í•©ë‹ˆë‹¤.

```jsx
import storage from "redux-persist/lib/storage";
...
const persistConfig = {
  key: "root",
  storage, //ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— state ì €ì¥
};
```

### ì˜¤ë¥˜ í•´ê²°

grammarbookì˜ ì´ë¦„ì€ ê±°ì˜ ë°”ë€Œì§€ ì•Šì„ ê²ƒì´ë¯€ë¡œ idëŒ€ì‹  grammarBookNameìœ¼ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.

ì´ì—ë”°ë¼ URL íŒŒì‹±ì„ grammarBookNameìœ¼ë¡œ í•´ì˜¤ê¸° ìœ„í•´ ë¼ìš°íŠ¸ë„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

```jsx
export const getGrammarBookById = async (grammarBookName) => {
  const response = await axios.get(`/api/grammarbook/${grammarBookName}`);
  return response.data;
};
```

ê°™ì€ grammarBookNameì´ ìˆ˜ì •ëœë‹¤ë©´ ì–´ë–»ê²Œ ë ì§€ ì‚´í´ë³¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.

### axios ê°ì²´ ì§ë ¬í™” ì˜¤ë¥˜ âœ¨âœ¨

```
A non-serializable value was detected in an action, in the path: `payload.headers`. Value: AxiosHeadersaccess-control-allow-headers: "*"access-control-allow-methods: "*"access-control-allow-origin: "*"cache-control: "no-cache, no-store, max-age=0, must-revalidate"connection: "close"content-encoding: "gzip"content-type: "application/json"date: "Wed, 07 Feb 2024 08:22:42 GMT"expires: "0"pragma: "no-cache"transfer-encoding: "chunked"vary: "Accept-Encoding"x-content-type-options: "nosniff"x-frame-options: "SAMEORIGIN"x-powered-by: "Express"x-xss-protection: "0"clear: (...)concat: (...)constructor: (...)delete: (...)get: (...)getAccept: (...)getAcceptEncoding: (...)getAuthorization: (...)getContentLength: (...)getContentType: (...)getUserAgent: (...)has: (...)hasAccept: (...)hasAcceptEncoding: (...)hasAuthorization: (...)hasContentLength: (...)hasContentType: (...)hasUserAgent: (...)normalize: (...)set: (...)setAccept: (...)setAcceptEncoding: (...)setAuthorization: (...)setContentLength: (...)setContentType: (...)setUserAgent: (...)toJSON: (...)toString: (...)Symbol(Symbol.toStringTag): (...)[[Prototype]]: Object 
Take a look at the logic that dispatched this action:
```

ìœ„ì—ì„œ ì œì‹œëœ ì˜¤ë¥˜ëŠ” `Axios` ìš”ì²­ì˜ ê²°ê³¼ë¡œ ë°›ì€ `headers` ê°ì²´ê°€ `Redux` ìƒíƒœë¡œ ì €ì¥ë˜ë©´ì„œ ë°œìƒí•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. `Axios` ìš”ì²­ì˜ ê²°ê³¼ ê°ì²´ëŠ” `data`, `status`, `statusText`, `headers`, `config` ë“± ì—¬ëŸ¬ê°€ì§€ ì†ì„±ì„ ê°€ì§€ê³  ìˆëŠ”ë°, ê·¸ ì¤‘ `data`ë§Œì´ ìš°ë¦¬ê°€ ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” API ì‘ë‹µ ê²°ê³¼ë‹¤.
****

### í•´ê²°

```jsx
export async function getVocaBooksAPI() {
  const response = await axios.get('/api/vocabooks');
  return response.data; // data ì†ì„±ë§Œ ë°˜í™˜í•©ë‹ˆë‹¤.
}
```

responseì— dataê°ì²´ë¥¼ ì¶”ê°€í–ˆë‹¤.

### redux nullì˜¤ë¥˜

<aside>
ğŸ’¡ **ê°œë°œì ì‹¤ìˆ˜ : redux ë¬¸ë²• ì˜¤ë¥˜**

</aside>

```sql
yield all([call(vocaSaga)]);
  yield all([call(vocaBookSaga)]);
```

rootsagaë¥¼

```sql
import createSagaMiddleware from "redux-saga";
import { all, call } from "redux-saga/effects";
import vocaBookSaga from "./voca/vocaBookSaga";
import vocaSaga from "./voca/vocaSaga";

const sagaMiddleware = createSagaMiddleware();

export function* rootSaga() {
  yield all([call(vocaSaga), call(vocaBookSaga)]);
}

export default sagaMiddleware;
```

ì´ ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •í•˜ë‹ˆ ë˜ì—ˆë‹¤.

### **cannot update a component ('...') while rendering a different component ('...') - JJY**

`ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ëœë”ë§í•˜ëŠ” ë„ì¤‘ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ì—†ë‹¤`ëŠ” ê²½ê³ ì…ë‹ˆë‹¤.

## ë³´ì•ˆ

---

### CDë‹¨ê³„ì—ì„œ ì£¼ì˜ì 

[[ìŠ¤í”„ë§] ë°°í¬ìš© ì„œë²„ì— ë°ì´í„°ë² ì´ìŠ¤ Schema ë° Data ì´ˆê¸° ì„¤ì •í•˜ê¸°](https://leveloper.tistory.com/38)

- ìš”ì•½ : ë°°í¬ ë‹¨ê³„ì—ì„œ Hibernate SQL ë³´ì—¬ì£¼ëŠ” ë¶€ë¶„ì„ noneìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.

## ë©”ì†Œë“œë‚´ì— ë§¤ê°œë³€ìˆ˜ë¥¼ ë“¤ê³ ì˜¬ë–„ëŠ”..

<aside>
<img src="WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/FM_24%201.png" alt="WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/FM_24%201.png" width="40px" /> **ìš”ì•½ :** `final`ë¡œ ì„ ì–¸ëœ ê°ì²´ëŠ” ë©”ì†Œë“œ ë‚´ì—ì„œ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, **ì˜ˆê¸°ì¹˜ ì•Šì€ ì‚¬ì´ë“œ ì´í™íŠ¸(side effect)ë‚˜ ë°ì´í„° ë³€ì¡°ë¥¼ ë°©ì§€**í•  ìˆ˜ ìˆë‹¤.

</aside>

```java
package com.wordwave.user;

import org.springframework.stereotype.Service;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;

@Slf4j
@RequiredArgsConstructor
@Service
public class UserService {
	private UserRepository userRepository;
	
	public SiteUser create(final SiteUser user) {
		if(user == null || user.getUserName() == null) {
			throw new RuntimeException("Invalid arguments");
		}
		final String userName = user.getUserName();
		if(userRepository.existsByUserName(userName)) {
			log.warn("UserName is already exists {}",userName);
			throw new RuntimeException("UserName is already exists");
		}
		
		return userRepository.save(user);
	}
	
}
```

`final` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì†Œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ëŠ” ê²ƒì€, **ê·¸ ë§¤ê°œë³€ìˆ˜ê°€ ë©”ì†Œë“œ ë‚´ì—ì„œ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒ**ì…ë‹ˆë‹¤. 

ì´ëŠ” íŠ¹íˆ ì¤‘ìš”í•œ ê°ì²´ë‚˜ ì—”í‹°í‹°ë¥¼ ë‹¤ë£¨ëŠ” ê²½ìš°ì— ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´, í•´ë‹¹ ê°ì²´ì˜ ìƒíƒœê°€ ì˜ˆê¸°ì¹˜ ì•Šê²Œ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

## CSRF ì„¤ì •

```java
package com.wordwave;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.header.writers.frameoptions.XFrameOptionsHeaderWriter;
import org.springframework.security.web.util.matcher.AntPathRequestMatcher;

@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Bean
    SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
	        .csrf().disable()
	        .authorizeHttpRequests((authorizeHttpRequests) -> authorizeHttpRequests
	            .requestMatchers(new AntPathRequestMatcher("/**")).permitAll())
	        .headers((headers) -> headers
	                    .addHeaderWriter(new XFrameOptionsHeaderWriter(
	                        XFrameOptionsHeaderWriter.XFrameOptionsMode.SAMEORIGIN)))
            
        ;
        return http.build();
    }
    

}
```

CI ë‹¨ê³„ì—ëŠ”, í•´ë‹¹ ì„¤ì •ì„ ë¹„í™œì„±í™” í–ˆìœ¼ë‚˜,

**CDë‹¨ê³„ì—ì„œëŠ” í™œì„±í™” í•´ì•¼í•¨!**

[Spring Boot 3.1(Spring 6.1) Security Config: 'csrf()' is deprecated and marked for removal](https://velog.io/@letsdev/Spring-Boot-3.1Spring-6.1-Security-Config-csrf-is-deprecated-and-marked-for-removal)

### Spring Security 6.2.0ì—ì„œ **is deprecated and marked for removal ê²½ê³  - JJY**

### ì˜¤ë¥˜ ë°œê²¬

ìŠ¤í”„ë§ë¶€íŠ¸ ë¹Œë“œ(ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰)ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ê²½ê³ ê°€ ë°œìƒí•©ë‹ˆë‹¤.

```
C:\github\WORDWAVE\src\main\java\com\wordwave\security\SecurityConfig.java:35: warning: [removal] cors() in HttpSecurity has been deprecated and marked for removal
        http.cors()
            ^
C:\github\WORDWAVE\src\main\java\com\wordwave\security\SecurityConfig.java:36: warning: [removal] and() in SecurityConfigurerAdapter has been deprecated and marked for removal
            .and()
            ^
  where B,O are type-variables:
    B extends SecurityBuilder<O> declared in class SecurityConfigurerAdapter
    O extends Object declared in class SecurityConfigurerAdapter
C:\github\WORDWAVE\src\main\java\com\wordwave\security\SecurityConfig.java:37: warning: [removal] httpBasic() in HttpSecurity has been deprecated and marked for removal
            .httpBasic().disable()
            ^
C:\github\WORDWAVE\src\main\java\com\wordwave\security\SecurityConfig.java:38: warning: [removal] sessionManagement() in HttpSecurity has been deprecated and marked for removal
            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)
            ^
C:\github\WORDWAVE\src\main\java\com\wordwave\security\SecurityConfig.java:39: warning: [removal] and() in SecurityConfigurerAdapter has been deprecated and marked for removal
            .and()
            ^
  where B,O are type-variables:
    B extends SecurityBuilder<O> declared in class SecurityConfigurerAdapter
    O extends Object declared in class SecurityConfigurerAdapter
C:\github\WORDWAVE\src\main\java\com\wordwave\security\SecurityConfig.java:40: warning: [removal] authorizeHttpRequests() in HttpSecurity has been deprecated and marked for removal
            .authorizeHttpRequests()
            ^
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
7 warnings
```

### ì˜¤ë¥˜ ì›ì¸

spring security 6.0ì´í•˜ ë²„ì „ì—ì„œ ì‚¬ìš©ëœ ë©”ì„œë“œë“¤ì´ 6.1ì´ìƒ ë²„ì „ë¶€í„°ëŠ” deprecatedë˜ë©° ì œê±° ëŒ€ìƒì´ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì´ëŠ” 6.1ë²„ì „ë¶€í„° ë©”ì„œë“œ ì²´ì´ë‹ì„ ì§€ì–‘í•˜ê³  í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì„ ì§€í–¥í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë³¸ë˜ í•¨ìˆ˜í˜• ë°©ì‹ì„ ì§€ì›í–ˆì§€ë§Œ ì‚¬ëŒë“¤ì´ ì˜ ì•ˆì¼ë‹¤ê³  í•©ë‹ˆë‹¤.

### ì˜¤ë¥˜ í•´ê²°

```java
http.cors()
		.and()
		.httpBasic().disable()
		.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)
		.and()
		.authorizeHttpRequests()
		.requestMatchers("/", "/api/**","/h2-console/**").permitAll()
		.requestMatchers(new AntPathRequestMatcher("/**/*.html")).permitAll()
		.requestMatchers(new AntPathRequestMatcher("/**/*.css")).permitAll()
		.requestMatchers(new AntPathRequestMatcher("/**/*.js")).permitAll()
		.anyRequest().authenticated();
```

ìœ„ ì½”ë“œëŠ” `SecurityConfig` í´ë˜ìŠ¤ì— ìˆëŠ” `SecurityFilterChain` ì„¤ì •ì˜ ì¼ë¶€ì…ë‹ˆë‹¤.

ìœ„ì—ì„œ deprecated ë¶€ë¶„ì€ `cors()`, `and()`, `httpBasic()`, `sessionManagement()`, `authorizeHttpRequests()`ì…ë‹ˆë‹¤.

ì´ë¥¼ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

+resourcesë””ë ‰í„°ë¦¬ì— ìˆëŠ” ì´ë¯¸ì§€ë“¤ì„ ëª»ë¶ˆëŸ¬ì™€ì„œ requestMatchersì— `"/static/**"`ê²½ë¡œë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

```java
http.cors(AbstractHttpConfigurer::disable)
		.httpBasic(HttpBasicConfigurer::disable)
		.sessionManagement(sessionManagement -> sessionManagement.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
		.authorizeHttpRequests(authorizeHttpRequests -> authorizeHttpRequests
		        .requestMatchers("/", "/api/**","/h2-console/**", "/static/**").permitAll()
		        .requestMatchers(new AntPathRequestMatcher("/**/*.html")).permitAll()
		        .requestMatchers(new AntPathRequestMatcher("/**/*.css")).permitAll()
		        .requestMatchers(new AntPathRequestMatcher("/**/*.js")).permitAll()
		        .anyRequest().authenticated());
```

---

### ë¹„ìŠ·í•œ ì˜¤ë¥˜ ë°œê²¬

SecurityConfig í´ë˜ìŠ¤ì— ì§€ì •í•œ `@EnableGlobalMethodSecurity(prePostEnabled = true)`ì— ì•„ë˜ì™€ ê°™ì´ deprecated ê²½ê³ ê°€ ë°œìƒí•©ë‹ˆë‹¤.

'org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity' is deprecated

### ì˜¤ë¥˜ í•´ê²°

`@EnableGlobalMethodSecurity`ëŒ€ì‹  `@EnableMethodSecurity`ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³ `prePostEnabled = true`ë¥¼ ì§€ì •í•  í•„ìš” ì—†ìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ê¸°ë³¸ê°’ì´ trueì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì°¸ê³ )

[@EnableGlobalMethodSecurity is deprecated in the new spring boot 3.0](https://stackoverflow.com/questions/74910066/enableglobalmethodsecurity-is-deprecated-in-the-new-spring-boot-3-0)

### íš¨ìœ¨ì ì¸ ì •ì ìì› ì¸ì¦ - JJY

[[Spring Security] ì •ì  ìì› ignoreí•˜ê¸°](https://velog.io/@yevini118/Spring-Security-ì •ì -ìì›-ignoreí•˜ê¸°)

ìœ„ í¬ìŠ¤íŠ¸ì—ì„œëŠ” **í•„í„°ë¥¼ ê±°ì¹˜ëŠ” `permitAll()`ë³´ë‹¤ í•„í„°ë¥¼ ê±°ì¹˜ì§€ ì•ŠëŠ”`ignore()`ê°€ íš¨ìœ¨ì **ì´ë¼ê³  í•©ë‹ˆë‹¤. ì™œê·¸ëŸ°ì§€ëŠ” ê³µë¶€ê°€ ë” í•„ìš”í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì¼ë‹¨ ì•„ë˜ì²˜ëŸ¼ ì ìš©í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤. ì¼ë¶€ jsonê³¼ icoê°€ frontend/build/ì— ë“¤ì–´ìˆì–´ static/** ê²½ë¡œì—ì„œ ëª»ì°¾ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•´ ë”°ë¡œ ê²½ë¡œë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

```java
package com.wordwave.security;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;
import org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;
import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;

import org.springframework.security.config.annotation.web.configurers.HttpBasicConfigurer;
import org.springframework.security.config.http.SessionCreationPolicy;

import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.header.writers.frameoptions.XFrameOptionsHeaderWriter;
import org.springframework.security.web.util.matcher.AntPathRequestMatcher;
import org.springframework.web.filter.CorsFilter;

@Configuration
@EnableWebSecurity
//@EnableGlobalMethodSecurity(prePostEnabled = true)
@EnableMethodSecurity
public class SecurityConfig {
    
    @Autowired
    private JwtAuthenticationFilter jwtAuthenticationFilter;

    @Bean
    SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        
        http
        .csrf(AbstractHttpConfigurer::disable)
        .headers((headers) -> headers
            .addHeaderWriter(new XFrameOptionsHeaderWriter(
                XFrameOptionsHeaderWriter.XFrameOptionsMode.SAMEORIGIN)));

        http.cors(AbstractHttpConfigurer::disable)
            .httpBasic(HttpBasicConfigurer::disable)
            .sessionManagement(sessionManagement -> sessionManagement.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
            .authorizeHttpRequests(authorizeHttpRequests -> authorizeHttpRequests
                    .requestMatchers("/", "/api/**").permitAll()
                    .anyRequest().authenticated());
        
        http.addFilterAfter(jwtAuthenticationFilter, CorsFilter.class);
        
        return http.build();
    }

    @Bean
    public WebSecurityCustomizer webSecurityCustomizer() {
        return (web) -> web.ignoring()
                .requestMatchers(new AntPathRequestMatcher("/h2-console/**"))
                .requestMatchers(new AntPathRequestMatcher("/static/**"))
                .requestMatchers(new AntPathRequestMatcher("/**/*.html"))
                .requestMatchers(new AntPathRequestMatcher("/**/*.css"))
                .requestMatchers(new AntPathRequestMatcher("/**/*.js"))
                .requestMatchers(new AntPathRequestMatcher("/**/*.json"))
                .requestMatchers(new AntPathRequestMatcher("/**/*.ico"));
    }
}
```

## ì´ìœ  : ë©”ì„œë‹ì²´ì´ë‹ â†’ í•¨ìˆ˜í˜•ë¬¸ë²•ìœ¼ë¡œ ë³€ê²½ (ì„±ëŠ¥ ì‹œì )

### jwt ë©”ì„œë“œ deprecated ê²½ê³  - JJY

### ì˜¤ë¥˜ ë°œê²¬

security > TokenProvider.javaì—ì„œ ì´ 3ê°œì˜ deprecated ê²½ê³ ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.

- `signWith`: *'signWith(io.jsonwebtoken.SignatureAlgorithm, java.lang.String)' is deprecated*
- *`parser`: 'parser()' is deprecated*
- `setSigningKey`: *'setSigningKey(java.lang.String)' is deprecated*

### ì˜¤ë¥˜ ì›ì¸

**ë¬¸ìì—´ í˜¹ì€ ë°”ì´íŠ¸ë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ”** `signWith`ë©”ì„œë“œëŠ” ì•ˆì „í•˜ì§€ ì•Šì€ ì›ì‹œì ì¸ ì•”í˜¸ ë¬¸ìì—´ì„ í‚¤ ì¸ìˆ˜ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— deprecated ëŒ€ìƒì´ë¼ê³  í•©ë‹ˆë‹¤. `setSigningKey`ë„ ë¹„ìŠ·í•œ ì´ìœ ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

### ì˜¤ë¥˜ í•´ê²°

ì•„ë˜ ì˜ˆì‹œì²˜ëŸ¼ Keyê°ì²´ë¥¼ `signWith`ì˜ ì¸ìˆ˜ë¡œ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. ì´ë•Œ, Key ì•Œê³ ë¦¬ì¦˜ì€ Keyê°ì²´ë¥¼ ìƒì„±í• ë•Œ ë„£ì–´ì£¼ê±°ë‚˜ `signWith`ì˜ ë‘ë²ˆì§¸ ì¸ìë¡œ ë„£ì–´ì¤˜ë„ ë©ë‹ˆë‹¤. 

```java
private Key key = Keys.secretKeyFor(SignatureAlgorithm.HS512);
 
return Jwts.builder()
		// headerì— ë“¤ì–´ê°ˆ ë‚´ìš© ë° ì„œëª…ì„ í•˜ê¸° ìœ„í•œ SECRET_KEY
		// payloadì— ë“¤ì–´ê°ˆ ë‚´ìš©
		.signWith(key)
		.setSubject(userEntity.getId()) // sub
		.setIssuer("demo app") // iss
		.setIssuedAt(new Date()) // iat
		.setExpiration(expiryDate) // exp
		.compact();
```

`parser`ì™€ `setSigningKey`ëŠ” ì•„ë˜ ì˜ˆì‹œì²˜ëŸ¼ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤.

- `parser` â†’ `parserBuilder`ë¡œ ë³€ê²½
- `setSigningKey`ì— ë¬¸ìì—´ ëŒ€ì‹  Keyê°ì²´ ë„£ê¸°

```java
Claims claims = Jwts.parserBuilder()
                .setSigningKey(key)
                .build()
                .parseClaimsJws(token)
                .getBody();
```

ìì„¸í•œ ìˆ˜ì • ë°©ë²•ì€ ì•„ë˜ í¬ìŠ¤íŠ¸ë¥¼ ì°¸ê³ í•˜ê¸° ë°”ëë‹ˆë‹¤.

[jwt signWith deprecated ì˜¤ë¥˜](https://leeeehhjj.tistory.com/61)

[[JWT] Spring Boot í™˜ê²½ì—ì„œ JWT(Json Web Token)ìƒì„± í•˜ê¸°](https://erjuer.tistory.com/87)

[JJWT signWith deprecated ì˜¤ë¥˜í•´ê²°](https://lenagend.tistory.com/17)

AJN ì¶”ê°€

### **"Authorization"ì´ë¼ëŠ” í—¤ë”ë¥¼ axiosì˜ ê¸°ë³¸ í—¤ë”ì— ì¶”ê°€í•˜ëŠ” ì´ìœ **

"Authorization"ì´ë¼ëŠ” í—¤ë”ë¥¼ axiosì˜ ê¸°ë³¸ í—¤ë”ì— ì¶”ê°€í•˜ëŠ” ì´ìœ ëŠ”, ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ í•´ë‹¹ ìš”ì²­ì´ ì¸ì¦ëœ ìš”ì²­ì„ì„ ì„œë²„ì—ê²Œ ì•Œë¦¬ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

JWT í† í°ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ì„ í•˜ë©´ ì„œë²„ì—ì„œ JWT í† í°ì„ ë°œê¸‰í•´ì¤ë‹ˆë‹¤. ì´ í† í°ì€ ì‚¬ìš©ìì˜ ì¸ì¦ ì •ë³´ë¥¼ ë‹´ê³  ìˆìœ¼ë©°, ì´ë¥¼ ì‚¬ìš©ìê°€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ ì´ í† í°ì„ ìš”ì²­ í—¤ë”ì— í¬í•¨ì‹œì¼œì„œ ë³´ë‚´ê²Œ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì„œë²„ëŠ” í—¤ë”ì— í¬í•¨ëœ í† í°ì„ í™•ì¸í•˜ì—¬ í•´ë‹¹ ìš”ì²­ì´ ìœ íš¨í•œ ìš”ì²­ì¸ì§€ë¥¼ íŒë‹¨í•˜ê²Œ ë©ë‹ˆë‹¤.

"Authorization" í—¤ë”ëŠ” ì´ëŸ° ì¸ì¦ í† í°ì„ í¬í•¨ì‹œí‚¤ê¸° ìœ„í•œ í—¤ë”ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ "Bearer {í† í°}"ê³¼ ê°™ì€ í˜•íƒœì˜ ê°’ì„ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. ì´ ê°’ì„ axiosì˜ ê¸°ë³¸ í—¤ë”ì— ì¶”ê°€í•´ë‘ë©´, axiosë¥¼ í†µí•´ ì„œë²„ì— ë³´ë‚´ëŠ” ëª¨ë“  ìš”ì²­ì— ì´ í—¤ë”ê°€ ìë™ìœ¼ë¡œ í¬í•¨ë˜ê²Œ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ëª¨ë“  ìš”ì²­ì´ ì¸ì¦ëœ ìš”ì²­ìœ¼ë¡œ ì²˜ë¦¬ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ axios ê¸°ë³¸ í—¤ë”ì— "Authorization"ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì€, ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ì„œë²„ì— ë³´ë‚´ëŠ” ìš”ì²­ì´ ì¸ì¦ëœ ìš”ì²­ì„ì„ í‘œì‹œí•˜ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë²„ëŠ” ìš”ì²­ì„ ë³´ë‚¸ í´ë¼ì´ì–¸íŠ¸ê°€ ëˆ„êµ¬ì¸ì§€ë¥¼ ì‹ë³„í•˜ê³ , ê·¸ì— ë§ëŠ” ì‘ë‹µì„ ë³´ë‚¼ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

### JWT í† í° ì €ì¥ì„ ì–´ë””ì—ë‹¤ê°€ ë³´ê´€í•˜ëŠ”ê²Œ ê°€ì¥ ë³´ì•ˆì´ ê°•í• ê¹Œ?

### ê³µê²© ì¢…ë¥˜ì— ëŒ€í•´ì„œ ê¶ê¸ˆí•˜ë‹¤ë©´..

1. XSS ê³µê²©
    
    ê³µê²©ì(í•´ì»¤)ê°€ í´ë¼ì´ì–¸íŠ¸ ë¸Œë¼ìš°ì €ì— Javascriptë¥¼ ì‚½ì…í•´ ì‹¤í–‰í•˜ëŠ” ê³µê²©ì´ë‹¤. ê³µê²©ìê°€Â `<input>`ì„ í†µí•´ Javascriptë¥¼ ì„œë²„ë¡œ ì „ì†¡í•´ ì„œë²„ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜, urlì— Javascriptë¥¼ ì ì–´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤ë©´ ê³µê²©ìê°€ ì‚¬ì´íŠ¸ì— ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚½ì…í•´ XSS ê³µê²©ì„ í•  ìˆ˜ ìˆë‹¤. ì´ë•Œ ê³µê²©ìëŠ” Javascriptë¥¼ í†µí•´ ì‚¬ì´íŠ¸ì˜ ê¸€ë¡œë²Œ ë³€ìˆ«ê°’ì„ ê°€ì ¸ì˜¤ê±°ë‚˜ ê·¸ ê°’ì„ ì´ìš©í•´ ì‚¬ì´íŠ¸ì¸ ì²™ API ì½œì„ ìš”ì²­í•  ìˆ˜ë„ ìˆë‹¤. ë‹¤ì‹œ ë§í•˜ë©´ ê³µê²©ìì˜ ì½”ë“œê°€ ë‚´ ì‚¬ì´íŠ¸ì˜ ë¡œì§ì¸ ì²™ í–‰ë™í•  ìˆ˜ ìˆë‹¤ëŠ” ê±°ë‹¤.
    
2. CSRF ê³µê²©
    
    ê³µê²©ìê°€ ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì—ì„œ ìš°ë¦¬ ì‚¬ì´íŠ¸ì˜ API ì½œì„ ìš”ì²­í•´ ì‹¤í–‰í•˜ëŠ” ê³µê²©ì´ë‹¤. API ì½œì„ ìš”ì²­í•  ìˆ˜ ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ ë„ë©”ì¸ì´ ëˆ„êµ¬ì¸ì§€ ì„œë²„ì—ì„œ í†µì œí•˜ê³  ìˆì§€ ì•Šë‹¤ë©´ CSRFê°€ ê°€ëŠ¥í•œë°, ì´ë•Œ ê³µê²©ìê°€ í´ë¼ì´ì–¸íŠ¸ì— ì €ì¥ëœ ìœ ì € ì¸ì¦ì •ë³´ë¥¼ ì„œë²„ì— ë³´ë‚¼ ìˆ˜ ìˆë‹¤ë©´, ì œëŒ€ë¡œ ë¡œê·¸ì¸í•œ ê²ƒì²˜ëŸ¼ ìœ ì €ì˜ ì •ë³´ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ìœ ì €ë§Œ ê°€ëŠ¥í•œ ì•¡ì…˜ë“¤ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ CSRFì— ì·¨ì•½í•œ ì€í–‰ ì‚¬ì´íŠ¸ê°€ ìˆë‹¤ë©´ ë¡œê·¸ì¸í•œ ì²™ ê³„ì¢Œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë°”ê¾¸ê±°ë‚˜ ì†¡ê¸ˆì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.
    

<aside>
<img src="WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/FM_24.png" alt="WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/FM_24.png" width="40px" /> **ê²°ë¡  : ì •ë‹µì€ ì—†ë‹¤.**
(JWT í† í° ì €ì¥ ìœ„ì¹˜ì— ê´€í•œ "ê°€ì¥" ë³´ì•ˆì ì¸ ë°©ë²•ì„ ì§€ì •í•˜ëŠ” ê²ƒì€ ì–´ë µìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì„ íƒí•˜ëŠ” ì €ì¥ ìœ„ì¹˜ë§ˆë‹¤ ì¥ë‹¨ì ì´ ìˆê³ , ê·¸ë¡œ ì¸í•œ ë³´ì•ˆ ìœ„í—˜ë„ ë‹¤ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.)

</aside>

### 1. localStorageì— ì €ì¥

### ğŸ‘ ì¥ì 

**CSRF ê³µê²©ì—ëŠ” ì•ˆì „í•˜ë‹¤.**

ê·¸ ì´ìœ ëŠ” ìë™ìœ¼ë¡œ requestì— ë‹´ê¸°ëŠ” ì¿ í‚¤ì™€ëŠ” ë‹¤ë¥´ê²Œ

js ì½”ë“œì— ì˜í•´ í—¤ë”ì— ë‹´ê¸°ë¯€ë¡œ XSSë¥¼ ëš«ì§€ ì•ŠëŠ” ì´ìƒ

ê³µê²©ìê°€ ì •ìƒì ì¸ ì‚¬ìš©ìì¸ ì²™ requestë¥¼ ë³´ë‚´ê¸°ê°€ ì–´ë µë‹¤.

### ğŸ‘ ë‹¨ì 

**XSSì— ì·¨ì•½í•˜ë‹¤.**

ê³µê²©ìê°€ localStorageì— ì ‘ê·¼í•˜ëŠ” Js ì½”ë“œ í•œ ì¤„ë§Œ ì£¼ì…í•˜ë©´

localStorageë¥¼ ê³µê²©ìê°€ ë‚´ ì§‘ì²˜ëŸ¼ ë“œë‚˜ë“¤ ìˆ˜ ìˆë‹¤.

### 2. cookieì— ì €ì¥

### ğŸ‘ ì¥ì 

**XSS ê³µê²©ìœ¼ë¡œë¶€í„° localStorageì— ë¹„í•´ ì•ˆì „í•˜ë‹¤.**

ì¿ í‚¤ì˜ httpOnly ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ Jsì—ì„œ ì¿ í‚¤ì— ì ‘ê·¼ ìì²´ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

ê·¸ë˜ì„œ XSS ê³µê²©ìœ¼ë¡œ ì¿ í‚¤ ì •ë³´ë¥¼ íƒˆì·¨í•  ìˆ˜ ì—†ë‹¤.

(httpOnly ì˜µì…˜ì€ ì„œë²„ì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆìŒ)

í•˜ì§€ë§ŒÂ **XSS ê³µê²©ìœ¼ë¡œë¶€í„° ì™„ì „íˆ ì•ˆì „í•œ ê²ƒì€ ì•„ë‹ˆë‹¤.**

httpOnly ì˜µì…˜ìœ¼ë¡œ ì¿ í‚¤ì˜ ë‚´ìš©ì„ ë³¼ ìˆ˜ ì—†ë‹¤ í•´ë„

jsë¡œ requestë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìë™ìœ¼ë¡œ requestì— ì‹¤ë¦¬ëŠ” ì¿ í‚¤ì˜ íŠ¹ì„± ìƒ

ì‚¬ìš©ìì˜ ì»´í“¨í„°ì—ì„œ ìš”ì²­ì„ ìœ„ì¡°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸.

ê³µê²©ìê°€ ê·€ì°®ì„ ë¿ì´ì§€ XSSê°€ ëš«ë¦°ë‹¤ë©´ httpOnly cookieë„ ì•ˆì „í•˜ì§„ ì•Šë‹¤.

ì°¸ê³  :Â ['About XSS Attack' ë¶€ë¶„ ì°¸ê³ ](https://dev.to/cotter/localstorage-vs-cookies-all-you-need-to-know-about-storing-jwt-tokens-securely-in-the-front-end-15id)

### ğŸ‘ ë‹¨ì 

**CSRF ê³µê²©ì— ì·¨ì•½í•˜ë‹¤.**

ìë™ìœ¼ë¡œ http requestì— ë‹´ì•„ì„œ ë³´ë‚´ê¸° ë•Œë¬¸ì—

ê³µê²©ìê°€ request urlë§Œ ì•ˆë‹¤ë©´

ì‚¬ìš©ìê°€ ê´€ë ¨ linkë¥¼ í´ë¦­í•˜ë„ë¡ ìœ ë„í•˜ì—¬ requestë¥¼ ìœ„ì¡°í•˜ê¸° ì‰½ë‹¤.

## í•´ê²°

í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” 

ì¿ í‚¤ì— ì €ì¥í•˜ëŠ” ë°©ì‹ì„ ì±„íƒí–ˆê³ , ë¸Œë¼ìš°ì €-localStoreageì— íƒìƒ‰ì„ ëª»í•˜ê²Œë”,

httponlyì˜µì…˜ì„ ë„£ì—ˆë‹¤.

ì¿ í‚¤ë°©ì‹ì€ CSRFë°©ì‹ì— ì·¨ì•½í•˜ë‹ˆ, ë°°í¬ë‹¨ê³„ì— CSRF ì„¤ì •ì„ í—ˆìš©í•˜ë„ë¡ í•˜ê² ë‹¤.

### **Jwts.parserBuilder().setSigningKey(JWT_SECRET_KEY).build().parseClaimsJws(token);**

### ë¬¸ì œ

ì–´ë ¤ìš´ ìš©ì–´ê°€ ìˆì–´ì„œ ì½”ë“œ ë¶„ì„ì„ í•´ë³´ì•˜ë‹¤.

### í•´ê²°

<aside>
<img src="WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/FM_24.png" alt="WORDWAVE%20(%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%AE%E1%86%BC)%20da49925431104687ad541e065bb9d7be/FM_24.png" width="40px" /> **'íŒŒì‹±'ì´ë€ ì–´ë–¤ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ì´í•´í•˜ëŠ” ê³¼ì •ì„ ë§í•©ë‹ˆë‹¤. 
ì£¼ì–´ì§„ ë°ì´í„°ë¥¼ êµ¬ì¡°ì— ë”°ë¼ ë¶„í•´í•˜ê³ , ê·¸ ì˜ë¯¸ë¥¼ í•´ì„í•˜ëŠ” ê²ƒì´ì£ .**

</aside>

`Jwts.parserBuilder().setSigningKey(JWT_SECRET_KEY).build().parseClaimsJws(token);`

`Jwts.parserBuilder()`: JWTë¥¼ íŒŒì‹±í•˜ê¸° ìœ„í•œ ë¹Œë”ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. **ë¹Œë” íŒ¨í„´ì€ ë³µì¡í•œ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë””ìì¸ íŒ¨í„´**ìœ¼ë¡œ, ë¹Œë”ë¥¼ í†µí•´ ì›í•˜ëŠ” ì„¤ì •ì„ í•˜ê³  ë‚˜ì„œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

`setSigningKey(JWT_SECRET_KEY)`: íŒŒì‹±í•  ë•Œ ì‚¬ìš©í•  ì„œëª… í‚¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. JWTëŠ” ì„œëª… í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í† í°ì´ ë³€ì¡°ë˜ì§€ ì•Šì•˜ìŒì„ ê²€ì¦í•©ë‹ˆë‹¤. ë”°ë¼ì„œ í† í°ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©í•œ ì„œëª… í‚¤ì™€ ë™ì¼í•œ í‚¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

`build()`: ì„¤ì •ì´ ì™„ë£Œë˜ë©´ ë¹Œë”ë¥¼ í†µí•´ JWT íŒŒì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

`parseClaimsJws(token)`: ìƒì„±í•œ íŒŒì„œë¥¼ ì‚¬ìš©í•˜ì—¬ ì£¼ì–´ì§„ JWTë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤. íŒŒì‹± ê²°ê³¼ë¡œ `Jws<Claims>` ê°ì²´ê°€ ë°˜í™˜ë˜ëŠ”ë°, ì´ ê°ì²´ë¥¼ í†µí•´ í† í°ì˜ í—¤ë”, í˜ì´ë¡œë“œ, ì„œëª…ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ ì´ ì½”ë“œëŠ” ì£¼ì–´ì§„ JWTë¥¼ ì„œëª… í‚¤ `JWT_SECRET_KEY`ë¡œ ê²€ì¦í•˜ê³  íŒŒì‹±í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´í›„ ë°˜í™˜ëœ `Jws<Claims>` ê°ì²´ë¥¼ í†µí•´ í† í°ì˜ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### JWT í† í° ìœ íš¨ì„± ê²€ì‚¬ë¡œì§ì„ ìƒì‹œ ì‹¤í–‰í•˜ëŠ”ë°, ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìì—ê²Œë„ ì˜¤ë¥˜ì°½ì„
ë„ì›Œì„œ ë¶ˆí¸í•˜ê²Œ í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•´ë³´ì

### App.js

```java
const { isLoging } = useSelector(state => state.auth);

  const dispatch = useDispatch();
  useEffect(()=>{
    if(isLoging) return;
    try {
      dispatch(isLoggedIn());
    } catch (error) {
      console.log('í˜„ì¬ ë¡œê·¸ì¸ ìƒíƒœê°€ ì•„ë‹™ë‹ˆë‹¤.');
    }
  },[dispatch,isLoging]);
```

### [ë°±ì—”ë“œ] UserController.java

```java
@PostMapping("/validateToken")
	public ResponseEntity<?> validateToken(
			HttpServletRequest request) {
		Cookie[] cookies = request.getCookies();
		if(cookies == null) {
			ResponseDTO responseDTO = ResponseDTO.builder()
					.error("Cookie is empty")
					.build();
			return ResponseEntity.status(404).body(responseDTO);
		}
	    String token = null;
	    for (Cookie cookie : cookies) {
	        if (cookie.getName().equals("token")) {
	            token = cookie.getValue();
	            break;
	        }
	    }
		
	    if (token == null) {
	        ResponseDTO responseDTO = ResponseDTO.builder()
	                .error("Token is empty")
	                .build();
	        return ResponseEntity.status(404).body(responseDTO);
	    }
	    //í† í°ì„ ì°¾ì•˜ì„ë–„ ê²€ì‚¬ì‹œì‘
	    try {
			Jwts.parserBuilder().setSigningKey(JWT_SECRET_KEY).build().parseClaimsJws(token);
		} catch (JwtException e) {
			ResponseDTO responseDTO = ResponseDTO.builder()
					.error("Token is invalid")
					.build();
			return ResponseEntity.badRequest().body(responseDTO);
		}
	    
	    
		return ResponseEntity.ok().body("validate success");
	}
```

### ë¬¸ì œ

ë¡œê·¸ì¸í•œ ì‚¬ìš©ì (ì¸ì¦ëœ ì‚¬ìš©ì)ë§Œ ì ‘ì†ê°€ëŠ¥í•˜ê²Œ í•˜ë ¤ëŠ” ì¡°ê±´ë¶€ ë¼ìš°íŒ…ì„ êµ¬í˜„í•˜ë ¤í–ˆë‹¤.

ì¸ì¦ ì—¬ë¶€ë¥¼ ë°±ì—”ë“œì—ì„œ APIë¥¼ ë§Œë“¤ì–´ í˜¸ì¶œí•œ í›„,

App.jsì—ì„œ í˜¸ì¶œ í•˜ê³ , ê·¸ì— ëŒ€í•œ ìœ ë¬´ë¥¼ stateë¡œ ë°›ì•„ì„œ í•´ë‹¹ state ê°’ì— ë”°ë¼
ì¡°ê±´ë¶€ ë¼ìš°í„°ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë ¤ëŠ”ë°,
**ë¡œê·¸ì¸ëœ ì‚¬ìš©ìì„ì—ë„ ë¶ˆêµ¬í•˜ê³ , url ì´ë™ì´ ì•ˆë¨.**

**ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìì—ê²Œ ì•± ì‹œì‘ ì²« í™”ë©´ë¶€í„° ì˜¤ë¥˜ íŒì—…ì°½ ì¶œë ¥**

ì´ëŸ¬í•œ ë¬¸ì œë“¤ì´ ìƒê²¼ë‹¤.

### í•´ê²°

```jsx
export const login = (username, password) => async dispatch => {
  dispatch({ type: LOGIN_REQUEST });
  try {
    const response = await authAPI.loginApi(username, password);
    dispatch({ type: LOGIN_SUCCESS, payload: response.data });
    sessionStorage.setItem('isLoging', true);
    return response.data;
  } catch (e) {
    dispatch({ type: LOGIN_FAILURE, error: e });
    throw e;
  }
};
```

ìŠ¤í”„ë§ì—ì„œ ì¤‘ê°„ì— DTOë¥¼ ë§Œë“¤ì–´ì„œ í•´ê²°í•˜ëŠ”ê²ƒì—ì„œ ì•„ì´ë””ì–´ë¥¼ ë”°ì™€ì„œ

ë¡œê·¸ì¸ì— ëŒ€í•œ ìœ ë¬´ë§Œ ì„¸ì…˜ì— ì €ì¥ì‹œì¼œì„œ

ì•ˆì „ë„ ì±™ê¸°ê³ , ì „ì—­ì ì¸ ì„¤ì •(ë¡œê·¸ì¸ ìœ ì§€)ë„ ì±™ê²¼ë‹¤.

### í† í°ì´ ìœ íš¨í•œì§€ ê²€ì¦í•˜ëŠ” apië¥¼ í˜¸ì¶œí–ˆìœ¼ë‚˜, ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìì—ê²Œë„ ì˜¤ë¥˜ë¥¼ í˜¸ì¶œí•˜ëŠ”ê±´ì— ëŒ€í•˜ì—¬

### ë¬¸ì œ

í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ìì˜ í† í°ì´ ìœ ìš”í•œì§€ ê²€ì¦í•˜ëŠ” API ë° ì•¡ì…˜í•¨ìˆ˜ë¥¼ ë””ìŠ¤íŒ¨ì¹˜ í•˜ëŠ”ë°,

ë¬¸ì œëŠ” ë¹„ë¡œê·¸ì¸ ëœ ì‚¬ìš©ìëŠ” í† í°ì´ ì—†ëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³ , í•´ë‹¹ ì‚¬ìš©ìì—ê²Œ ê¹Œì§€

ì˜¤ë¥˜ë¥¼ í˜¸ì¶œì‹œì¼œì„œ ë¶ˆí¸í•¨ì„ ê²ªì—ˆë‹¤.

### í•´ê²°

```jsx
export const isLoggedIn = () => async dispatch => {
  dispatch({ type : IS_LOGGED_IN });
  try {
    const response = await authAPI.validateTokenApi();
    dispatch({ type : IS_LOGGED_IN_SUCCESS, payload: response.data});
    console.log('validate success');
    return response.data;
  } catch (e) {
    if (e.response && e.response.status === 401) {//ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì ì˜ˆì™¸ì²˜ë¦¬
      dispatch({ type: LOGOUT });
      console.log('ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìì„(í† í°ì—†ìŒ)');
    } else {
      dispatch({ type : IS_LOGGED_IN_FAILURE, error: e});
      throw e;
    }
  }
}
```

ì•„ì˜ˆ ë‚¨ì•„ìˆëŠ” ì“°ë˜ê¸°ê°’ ë°ì´í„°ë“¤ì„ LOGOUT ì•¡ì…˜í•¨ìˆ˜ë¥¼ ë””ìŠ¤íŒ¨ì¹˜ë¥¼ í†µí•´ ì—†ì•´ê³ ,

ì§„ì§œ ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì—ê²Œë§Œ errorë¥¼ ë˜ì§€ë„ë¡

if-elseë¬¸ì„ ì‚¬ìš©í–ˆë‹¤.

### JWTí† í°ì„ ì¿ í‚¤ ì €ì¥ë°©ì‹ì„ ì‚¬ìš©í•´ë„ í¬ë¡¬ íƒ­ì„ ë‹«ì•„ë„ ìë™ ë¡œê·¸ì•„ì›ƒì´ ë˜ëŠ”ê°€
&
í¬ë¡¬íƒ­ì„ ë‹«ê³  ë‹¤ì‹œ ì—´ì—ˆì„ë–„ ì™œ USERì •ë³´ë§Œ ì•ˆë‚˜ì˜¤ëŠ”ê°€

### í•´ê²°

`import storage from 'redux-persist/lib/storageâ€™`
STOREAGE ì¦‰ store ìƒíƒœê°’ì„ì„ localStoraageë¡œ ë³€ê²½í–ˆë‹¤.